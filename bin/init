#!/usr/bin/env bash

if [ -d ".git" ]; then
  echo "===> Found .git directory, skipping Git repository initialize."
else
  echo "===> Initializing Git repository..."
  git init --quiet
fi

if [ -f "longboat.cfg" ]; then
  echo "===> Found longboat.cfg file, skipping interactive setup."
else
  echo "===> Longboat requires an API token. If you don't have one, get it"
  echo "===> from: https://longboat.io/settings/api/list"
  echo ""
  echo -n "Longboat API Token: "
  read TOKEN

  echo ""
  echo "===> Writing configuration file longboat.cfg"
  echo "# Longboat API Configuration" > longboat.cfg
  echo "LONGBOAT_TOKEN=\"${TOKEN}\"" >> longboat.cfg
  git add longboat.cfg
  git commit --quiet -m "Adding initial longboat.cfg"
fi
