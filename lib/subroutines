#!/usr/bin/env bash

function echo_json() {
  command -v jq > /dev/null
  if [ $? -eq 0 ]; then
    echo $1 | jq .
  else
    echo $1
  fi
}

function api_curl() {
  local ARGS=""
  local METHOD="$1"
  local URL="${LONGBOAT_ENDPOINT}/${LONGBOAT_API}$2"

  if [ $# -gt 2 ]; then
    for ARG in "${@:3}"; do
      ARGS="${ARGS} --data-urlencode ${ARG}"
    done
  fi

  curl -s -H "Authorization: ${LONGBOAT_TOKEN}" ${ARGS} -X ${METHOD} "${URL}"
}

function boat_help() {
cat << ENDOFHELP
Usage: boat <command> [<args>]

  init        Initialize a new Longboat project
  update      Update project with latest config
  doctor      Check Longboat installation and project

Management commands:

  host        Manage hosts.
  sshkey      Manage your SSH keys.
  org         Manage your organizations.

Ansible commands:

  inventory   Get inventory from API. Used by ansible.

More information in the online documentation:
${LONGBOAT_DOCS}

ENDOFHELP
}